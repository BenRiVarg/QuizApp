<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Drag Mobile</title>

  <style>
    .droptarget {
      float: left; 
      width: 100px; 
      height: 35px;
      margin: 15px;
      padding: 10px;
      border: 1px solid #aaaaaa;
    }
    </style>
    <script src="/mobile/index.min.js"></script>
    <script src="/mobile/mobile.js"></script>
    <script src="/mobile/scroll-behaviour.min.js"></script>

    <link rel="stylesheet" href="/mobile/default.css">
    <link rel="stylesheet" href="/mobile/icons.css">
    <link rel="stylesheet" href="/mobile/debug.css">
</head>
<body>

<p>Drag the p element back and forth between the two rectangles:</p>

<div class="droptarget" id="inicial">
  <p draggable="true" id="dragtarget">Drag me!</p>
</div>

<div class="droptarget" id="final"></div>

<p style="clear:both;"><strong>Note:</strong> drag events are not supported in Internet Explorer 8 and earlier versions or Safari 5.1 and earlier versions.</p>

<p id="demo"></p>

<script>

function sound(src) {
  this.sound = document.createElement("audio");
  this.sound.src = src;
  this.sound.setAttribute("preload", "auto");
  this.sound.setAttribute("controls", "none");
  this.sound.style.display = "none";
  this.sound.volume=0.3;
  document.body.appendChild(this.sound);
  this.play = function(){
    this.sound.play();
  }
  this.stop = function(){
    this.sound.pause();
  }

  this.reload= function(){
    this.sound.load();
  }
} 

//-------------Sonidos-------------//

var  drag=new sound("/sonidos/drag.mp3");
drag.sound.playbackRate=2;
var drop=new sound("/sonidos/drop.mp3");
drag.sound.playbackRate=2;
var rechazo=new sound("/sonidos/rechazoDrag.mp3");

//--------------------------------

  var casillaInicial=document.getElementById("inicial");
  console.log(casillaInicial);

  var casillaFinal=document.getElementById("final");
  console.log(casillaFinal);
  //var casillaFinal==document.querySelector("div.droptarget")[1];

  casillaInicial.addEventListener("dragstart", function(event) {
    // The dataTransfer.setData() method sets the data type and the value of the dragged data
    event.dataTransfer.setData("Text", event.target.id);
    
    // Output some text when starting to drag the p element
    document.getElementById("demo").innerHTML = "Started to drag the p element.";
    
    // Change the opacity of the draggable element
    event.target.style.opacity = "0.4";
  });

   // When the draggable p element enters the droptarget, change the DIVS's border style
   casillaFinal.addEventListener("dragenter", function(event) {
     event.preventDefault();
     event.stopPropagation();
    if ( event.target.className == "droptarget" ) {
      event.target.style.border = "3px dotted red";
    }
  });

  
  casillaFinal.addEventListener("dragover", function(event) {
    event.preventDefault();
  });
  
  
  casillaFinal.addEventListener("dragleave", function(event) {
    if ( event.target.className == "droptarget" ) {
      event.target.style.border = "";
    }
  });

  casillaFinal.addEventListener("drop", function(event) {
    event.preventDefault();
    console.log(event.target);
    if ( event.target.className == "droptarget" ) {
      document.getElementById("demo").style.color = "";
      event.target.style.border = "";
      var data = event.dataTransfer.getData("Text");
      event.target.appendChild(document.getElementById(data));
    }
  });

  </script>
  
</body>
</html>